{"version":3,"file":"index.modern.js","sources":["../src/tagcanvas.js","../src/index.js"],"sourcesContent":["/**\n * Copyright (C) 2010-2015 Graham Breach\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * TagCanvas 2.9\n * For more information, please contact <graham@goat1000.com>\n */\nvar i,\n  j,\n  abs = Math.abs,\n  sin = Math.sin,\n  cos = Math.cos,\n  max = Math.max,\n  min = Math.min,\n  ceil = Math.ceil,\n  sqrt = Math.sqrt,\n  pow = Math.pow,\n  hexlookup3 = {},\n  hexlookup2 = {},\n  hexlookup1 = {\n    0: \"0,\",\n    1: \"17,\",\n    2: \"34,\",\n    3: \"51,\",\n    4: \"68,\",\n    5: \"85,\",\n    6: \"102,\",\n    7: \"119,\",\n    8: \"136,\",\n    9: \"153,\",\n    a: \"170,\",\n    A: \"170,\",\n    b: \"187,\",\n    B: \"187,\",\n    c: \"204,\",\n    C: \"204,\",\n    d: \"221,\",\n    D: \"221,\",\n    e: \"238,\",\n    E: \"238,\",\n    f: \"255,\",\n    F: \"255,\",\n  },\n  Oproto,\n  Tproto,\n  TCproto,\n  Mproto,\n  Vproto,\n  TSproto,\n  TCVproto,\n  doc = document,\n  ocanvas,\n  handlers = {};\nfor (i = 0; i < 256; ++i) {\n  j = i.toString(16);\n  if (i < 16) j = \"0\" + j;\n  hexlookup2[j] = hexlookup2[j.toUpperCase()] = i.toString() + \",\";\n}\nfunction Defined(d) {\n  return typeof d != \"undefined\";\n}\nfunction IsObject(o) {\n  return typeof o == \"object\" && o != null;\n}\nfunction Clamp(v, mn, mx) {\n  return isNaN(v) ? mx : min(mx, max(mn, v));\n}\nfunction Nop() {\n  return false;\n}\nfunction TimeNow() {\n  return new Date().valueOf();\n}\nfunction SortList(l, f) {\n  var nl = [],\n    tl = l.length,\n    i;\n  for (i = 0; i < tl; ++i) nl.push(l[i]);\n  nl.sort(f);\n  return nl;\n}\nfunction Shuffle(a) {\n  var i = a.length - 1,\n    t,\n    p;\n  while (i) {\n    p = ~~(Math.random() * i);\n    t = a[i];\n    a[i] = a[p];\n    a[p] = t;\n    --i;\n  }\n}\nfunction Vector(x, y, z) {\n  this.x = x;\n  this.y = y;\n  this.z = z;\n}\nVproto = Vector.prototype;\nVproto.length = function () {\n  return sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n};\nVproto.dot = function (v) {\n  return this.x * v.x + this.y * v.y + this.z * v.z;\n};\nVproto.cross = function (v) {\n  var x = this.y * v.z - this.z * v.y,\n    y = this.z * v.x - this.x * v.z,\n    z = this.x * v.y - this.y * v.x;\n  return new Vector(x, y, z);\n};\nVproto.angle = function (v) {\n  var dot = this.dot(v),\n    ac;\n  if (dot == 0) return Math.PI / 2.0;\n  ac = dot / (this.length() * v.length());\n  if (ac >= 1) return 0;\n  if (ac <= -1) return Math.PI;\n  return Math.acos(ac);\n};\nVproto.unit = function () {\n  var l = this.length();\n  return new Vector(this.x / l, this.y / l, this.z / l);\n};\nfunction MakeVector(lg, lt) {\n  lt = (lt * Math.PI) / 180;\n  lg = (lg * Math.PI) / 180;\n  var x = sin(lg) * cos(lt),\n    y = -sin(lt),\n    z = -cos(lg) * cos(lt);\n  return new Vector(x, y, z);\n}\nfunction Matrix(a) {\n  this[1] = { 1: a[0], 2: a[1], 3: a[2] };\n  this[2] = { 1: a[3], 2: a[4], 3: a[5] };\n  this[3] = { 1: a[6], 2: a[7], 3: a[8] };\n}\nMproto = Matrix.prototype;\nMatrix.Identity = function () {\n  return new Matrix([1, 0, 0, 0, 1, 0, 0, 0, 1]);\n};\nMatrix.Rotation = function (angle, u) {\n  var sina = sin(angle),\n    cosa = cos(angle),\n    mcos = 1 - cosa;\n  return new Matrix([\n    cosa + pow(u.x, 2) * mcos,\n    u.x * u.y * mcos - u.z * sina,\n    u.x * u.z * mcos + u.y * sina,\n    u.y * u.x * mcos + u.z * sina,\n    cosa + pow(u.y, 2) * mcos,\n    u.y * u.z * mcos - u.x * sina,\n    u.z * u.x * mcos - u.y * sina,\n    u.z * u.y * mcos + u.x * sina,\n    cosa + pow(u.z, 2) * mcos,\n  ]);\n};\nMproto.mul = function (m) {\n  var a = [],\n    i,\n    j,\n    mmatrix = m.xform ? 1 : 0;\n  for (i = 1; i <= 3; ++i)\n    for (j = 1; j <= 3; ++j) {\n      if (mmatrix)\n        a.push(\n          this[i][1] * m[1][j] + this[i][2] * m[2][j] + this[i][3] * m[3][j]\n        );\n      else a.push(this[i][j] * m);\n    }\n  return new Matrix(a);\n};\nMproto.xform = function (p) {\n  var a = {},\n    x = p.x,\n    y = p.y,\n    z = p.z;\n  a.x = x * this[1][1] + y * this[2][1] + z * this[3][1];\n  a.y = x * this[1][2] + y * this[2][2] + z * this[3][2];\n  a.z = x * this[1][3] + y * this[2][3] + z * this[3][3];\n  return a;\n};\nfunction PointsOnSphere(n, xr, yr, zr, magic) {\n  var i,\n    y,\n    r,\n    phi,\n    pts = [],\n    off = 2 / n,\n    inc;\n  inc = Math.PI * (3 - sqrt(5) + (parseFloat(magic) ? parseFloat(magic) : 0));\n  for (i = 0; i < n; ++i) {\n    y = i * off - 1 + off / 2;\n    r = sqrt(1 - y * y);\n    phi = i * inc;\n    pts.push([cos(phi) * r * xr, y * yr, sin(phi) * r * zr]);\n  }\n  return pts;\n}\nfunction Cylinder(n, o, xr, yr, zr, magic) {\n  var phi,\n    pts = [],\n    off = 2 / n,\n    inc,\n    i,\n    j,\n    k,\n    l;\n  inc = Math.PI * (3 - sqrt(5) + (parseFloat(magic) ? parseFloat(magic) : 0));\n  for (i = 0; i < n; ++i) {\n    j = i * off - 1 + off / 2;\n    phi = i * inc;\n    k = cos(phi);\n    l = sin(phi);\n    pts.push(o ? [j * xr, k * yr, l * zr] : [k * xr, j * yr, l * zr]);\n  }\n  return pts;\n}\nfunction Ring(o, n, xr, yr, zr, j) {\n  var phi,\n    pts = [],\n    inc = (Math.PI * 2) / n,\n    i,\n    k,\n    l;\n  for (i = 0; i < n; ++i) {\n    phi = i * inc;\n    k = cos(phi);\n    l = sin(phi);\n    pts.push(o ? [j * xr, k * yr, l * zr] : [k * xr, j * yr, l * zr]);\n  }\n  return pts;\n}\nfunction PointsOnCylinderV(n, xr, yr, zr, m) {\n  return Cylinder(n, 0, xr, yr, zr, m);\n}\nfunction PointsOnCylinderH(n, xr, yr, zr, m) {\n  return Cylinder(n, 1, xr, yr, zr, m);\n}\nfunction PointsOnRingV(n, xr, yr, zr, offset) {\n  offset = isNaN(offset) ? 0 : offset * 1;\n  return Ring(0, n, xr, yr, zr, offset);\n}\nfunction PointsOnRingH(n, xr, yr, zr, offset) {\n  offset = isNaN(offset) ? 0 : offset * 1;\n  return Ring(1, n, xr, yr, zr, offset);\n}\nfunction CentreImage(t) {\n  var i = new Image();\n  i.onload = function () {\n    var dx = i.width / 2,\n      dy = i.height / 2;\n    t.centreFunc = function (c, w, h, cx, cy) {\n      c.setTransform(1, 0, 0, 1, 0, 0);\n      c.globalAlpha = 1;\n      c.drawImage(i, cx - dx, cy - dy);\n    };\n  };\n  i.src = t.centreImage;\n}\nfunction SetAlpha(c, a) {\n  var d = c,\n    p1,\n    p2,\n    ae = (a * 1).toPrecision(3) + \")\";\n  if (c[0] === \"#\") {\n    if (!hexlookup3[c])\n      if (c.length === 4)\n        hexlookup3[c] =\n          \"rgba(\" + hexlookup1[c[1]] + hexlookup1[c[2]] + hexlookup1[c[3]];\n      else\n        hexlookup3[c] =\n          \"rgba(\" +\n          hexlookup2[c.substr(1, 2)] +\n          hexlookup2[c.substr(3, 2)] +\n          hexlookup2[c.substr(5, 2)];\n    d = hexlookup3[c] + ae;\n  } else if (c.substr(0, 4) === \"rgb(\" || c.substr(0, 4) === \"hsl(\") {\n    d = c.replace(\"(\", \"a(\").replace(\")\", \",\" + ae);\n  } else if (c.substr(0, 5) === \"rgba(\" || c.substr(0, 5) === \"hsla(\") {\n    p1 = c.lastIndexOf(\",\") + 1;\n    p2 = c.indexOf(\")\");\n    a *= parseFloat(c.substring(p1, p2));\n    d = c.substr(0, p1) + a.toPrecision(3) + \")\";\n  }\n  return d;\n}\nfunction NewCanvas(w, h) {\n  // if using excanvas, give up now\n  if (window.G_vmlCanvasManager) return null;\n  var c = doc.createElement(\"canvas\");\n  c.width = w;\n  c.height = h;\n  return c;\n}\n// I think all browsers pass this test now...\nfunction ShadowAlphaBroken() {\n  var cv = NewCanvas(3, 3),\n    c,\n    i;\n  if (!cv) return false;\n  c = cv.getContext(\"2d\");\n  c.strokeStyle = \"#000\";\n  c.shadowColor = \"#fff\";\n  c.shadowBlur = 3;\n  c.globalAlpha = 0;\n  c.strokeRect(2, 2, 2, 2);\n  c.globalAlpha = 1;\n  i = c.getImageData(2, 2, 1, 1);\n  cv = null;\n  return i.data[0] > 0;\n}\nfunction SetGradient(c, l, o, g) {\n  var gd = c.createLinearGradient(0, 0, l, 0),\n    i;\n  for (i in g) gd.addColorStop(1 - i, g[i]);\n  c.fillStyle = gd;\n  c.fillRect(0, o, l, 1);\n}\nfunction FindGradientColour(tc, p, r) {\n  var l = 1024,\n    h = 1,\n    gl = tc.weightGradient,\n    cv,\n    c,\n    i,\n    d;\n  if (tc.gCanvas) {\n    c = tc.gCanvas.getContext(\"2d\");\n    h = tc.gCanvas.height;\n  } else {\n    if (IsObject(gl[0])) h = gl.length;\n    else gl = [gl];\n    tc.gCanvas = cv = NewCanvas(l, h);\n    if (!cv) return null;\n    c = cv.getContext(\"2d\");\n    for (i = 0; i < h; ++i) SetGradient(c, l, i, gl[i]);\n  }\n  r = max(min(r || 0, h - 1), 0);\n  d = c.getImageData(~~((l - 1) * p), r, 1, 1).data;\n  return \"rgba(\" + d[0] + \",\" + d[1] + \",\" + d[2] + \",\" + d[3] / 255 + \")\";\n}\nfunction TextSet(\n  ctxt,\n  font,\n  colour,\n  strings,\n  padx,\n  pady,\n  shadowColour,\n  shadowBlur,\n  shadowOffsets,\n  maxWidth,\n  widths,\n  align\n) {\n  var xo =\n      padx +\n      (shadowBlur || 0) +\n      (shadowOffsets.length && shadowOffsets[0] < 0\n        ? abs(shadowOffsets[0])\n        : 0),\n    yo =\n      pady +\n      (shadowBlur || 0) +\n      (shadowOffsets.length && shadowOffsets[1] < 0\n        ? abs(shadowOffsets[1])\n        : 0),\n    i,\n    xc;\n  ctxt.font = font;\n  ctxt.textBaseline = \"top\";\n  ctxt.fillStyle = colour;\n  shadowColour && (ctxt.shadowColor = shadowColour);\n  shadowBlur && (ctxt.shadowBlur = shadowBlur);\n  if (shadowOffsets.length) {\n    ctxt.shadowOffsetX = shadowOffsets[0];\n    ctxt.shadowOffsetY = shadowOffsets[1];\n  }\n  for (i = 0; i < strings.length; ++i) {\n    xc = 0;\n    if (widths) {\n      if (\"right\" == align) {\n        xc = maxWidth - widths[i];\n      } else if (\"centre\" == align) {\n        xc = (maxWidth - widths[i]) / 2;\n      }\n    }\n    ctxt.fillText(strings[i], xo + xc, yo);\n    yo += parseInt(font);\n  }\n}\nfunction RRect(c, x, y, w, h, r, s) {\n  if (r) {\n    c.beginPath();\n    c.moveTo(x, y + h - r);\n    c.arcTo(x, y, x + r, y, r);\n    c.arcTo(x + w, y, x + w, y + r, r);\n    c.arcTo(x + w, y + h, x + w - r, y + h, r);\n    c.arcTo(x, y + h, x, y + h - r, r);\n    c.closePath();\n    c[s ? \"stroke\" : \"fill\"]();\n  } else {\n    c[s ? \"strokeRect\" : \"fillRect\"](x, y, w, h);\n  }\n}\nfunction TextCanvas(\n  strings,\n  font,\n  w,\n  h,\n  maxWidth,\n  stringWidths,\n  align,\n  valign,\n  scale\n) {\n  this.strings = strings;\n  this.font = font;\n  this.width = w;\n  this.height = h;\n  this.maxWidth = maxWidth;\n  this.stringWidths = stringWidths;\n  this.align = align;\n  this.valign = valign;\n  this.scale = scale;\n}\nTCVproto = TextCanvas.prototype;\nTCVproto.SetImage = function (\n  image,\n  w,\n  h,\n  position,\n  padding,\n  align,\n  valign,\n  scale\n) {\n  this.image = image;\n  this.iwidth = w * this.scale;\n  this.iheight = h * this.scale;\n  this.ipos = position;\n  this.ipad = padding * this.scale;\n  this.iscale = scale;\n  this.ialign = align;\n  this.ivalign = valign;\n};\nTCVproto.Align = function (size, space, a) {\n  var pos = 0;\n  if (a == \"right\" || a == \"bottom\") pos = space - size;\n  else if (a != \"left\" && a != \"top\") pos = (space - size) / 2;\n  return pos;\n};\nTCVproto.Create = function (\n  colour,\n  bgColour,\n  bgOutline,\n  bgOutlineThickness,\n  shadowColour,\n  shadowBlur,\n  shadowOffsets,\n  padding,\n  radius\n) {\n  var cv,\n    cw,\n    ch,\n    c,\n    x1,\n    x2,\n    y1,\n    y2,\n    offx,\n    offy,\n    ix,\n    iy,\n    iw,\n    ih,\n    rr,\n    sox = abs(shadowOffsets[0]),\n    soy = abs(shadowOffsets[1]),\n    shadowcv,\n    shadowc;\n  padding = max(padding, sox + shadowBlur, soy + shadowBlur);\n  x1 = 2 * (padding + bgOutlineThickness);\n  y1 = 2 * (padding + bgOutlineThickness);\n  cw = this.width + x1;\n  ch = this.height + y1;\n  offx = offy = padding + bgOutlineThickness;\n\n  if (this.image) {\n    ix = iy = padding + bgOutlineThickness;\n    iw = this.iwidth;\n    ih = this.iheight;\n    if (this.ipos == \"top\" || this.ipos == \"bottom\") {\n      if (iw < this.width) ix += this.Align(iw, this.width, this.ialign);\n      else offx += this.Align(this.width, iw, this.align);\n      if (this.ipos == \"top\") offy += ih + this.ipad;\n      else iy += this.height + this.ipad;\n      cw = max(cw, iw + x1);\n      ch += ih + this.ipad;\n    } else {\n      if (ih < this.height) iy += this.Align(ih, this.height, this.ivalign);\n      else offy += this.Align(this.height, ih, this.valign);\n      if (this.ipos == \"right\") ix += this.width + this.ipad;\n      else offx += iw + this.ipad;\n      cw += iw + this.ipad;\n      ch = max(ch, ih + y1);\n    }\n  }\n\n  cv = NewCanvas(cw, ch);\n  if (!cv) return null;\n  x1 = y1 = bgOutlineThickness / 2;\n  x2 = cw - bgOutlineThickness;\n  y2 = ch - bgOutlineThickness;\n  rr = min(radius, x2 / 2, y2 / 2);\n  c = cv.getContext(\"2d\");\n  if (bgColour) {\n    c.fillStyle = bgColour;\n    RRect(c, x1, y1, x2, y2, rr);\n  }\n  if (bgOutlineThickness) {\n    c.strokeStyle = bgOutline;\n    c.lineWidth = bgOutlineThickness;\n    RRect(c, x1, y1, x2, y2, rr, true);\n  }\n  if (shadowBlur || sox || soy) {\n    // use a transparent canvas to draw on\n    shadowcv = NewCanvas(cw, ch);\n    if (shadowcv) {\n      shadowc = c;\n      c = shadowcv.getContext(\"2d\");\n    }\n  }\n\n  // don't use TextSet shadow support because it adds space for shadow\n  TextSet(\n    c,\n    this.font,\n    colour,\n    this.strings,\n    offx,\n    offy,\n    0,\n    0,\n    [],\n    this.maxWidth,\n    this.stringWidths,\n    this.align\n  );\n\n  if (this.image) c.drawImage(this.image, ix, iy, iw, ih);\n\n  if (shadowc) {\n    // draw the text and image with the added shadow\n    c = shadowc;\n    shadowColour && (c.shadowColor = shadowColour);\n    shadowBlur && (c.shadowBlur = shadowBlur);\n    c.shadowOffsetX = shadowOffsets[0];\n    c.shadowOffsetY = shadowOffsets[1];\n    c.drawImage(shadowcv, 0, 0);\n  }\n  return cv;\n};\nfunction ExpandImage(i, w, h) {\n  var cv = NewCanvas(w, h),\n    c;\n  if (!cv) return null;\n  c = cv.getContext(\"2d\");\n  c.drawImage(i, (w - i.width) / 2, (h - i.height) / 2);\n  return cv;\n}\nfunction ScaleImage(i, w, h) {\n  var cv = NewCanvas(w, h),\n    c;\n  if (!cv) return null;\n  c = cv.getContext(\"2d\");\n  c.drawImage(i, 0, 0, w, h);\n  return cv;\n}\nfunction AddBackgroundToImage(\n  i,\n  w,\n  h,\n  scale,\n  colour,\n  othickness,\n  ocolour,\n  padding,\n  radius,\n  ofill\n) {\n  var cw = w + (2 * padding + othickness) * scale,\n    ch = h + (2 * padding + othickness) * scale,\n    cv = NewCanvas(cw, ch),\n    c,\n    x1,\n    y1,\n    x2,\n    y2,\n    ocanvas,\n    cc,\n    rr;\n  if (!cv) return null;\n  othickness *= scale;\n  radius *= scale;\n  x1 = y1 = othickness / 2;\n  x2 = cw - othickness;\n  y2 = ch - othickness;\n  padding = padding * scale + x1; // add space for outline\n  c = cv.getContext(\"2d\");\n  rr = min(radius, x2 / 2, y2 / 2);\n  if (colour) {\n    c.fillStyle = colour;\n    RRect(c, x1, y1, x2, y2, rr);\n  }\n  if (othickness) {\n    c.strokeStyle = ocolour;\n    c.lineWidth = othickness;\n    RRect(c, x1, y1, x2, y2, rr, true);\n  }\n\n  if (ofill) {\n    // use compositing to colour in the image and border\n    ocanvas = NewCanvas(cw, ch);\n    cc = ocanvas.getContext(\"2d\");\n    cc.drawImage(i, padding, padding, w, h);\n    cc.globalCompositeOperation = \"source-in\";\n    cc.fillStyle = ocolour;\n    cc.fillRect(0, 0, cw, ch);\n    cc.globalCompositeOperation = \"destination-over\";\n    cc.drawImage(cv, 0, 0);\n    cc.globalCompositeOperation = \"source-over\";\n    c.drawImage(ocanvas, 0, 0);\n  } else {\n    c.drawImage(i, padding, padding, i.width, i.height);\n  }\n  return { image: cv, width: cw / scale, height: ch / scale };\n}\n/**\n * Rounds off the corners of an image\n */\nfunction RoundImage(i, r, iw, ih, s) {\n  var cv,\n    c,\n    r1 = parseFloat(r),\n    l = max(iw, ih);\n  cv = NewCanvas(iw, ih);\n  if (!cv) return null;\n  if (r.indexOf(\"%\") > 0) r1 = (l * r1) / 100;\n  else r1 = r1 * s;\n  c = cv.getContext(\"2d\");\n  c.globalCompositeOperation = \"source-over\";\n  c.fillStyle = \"#fff\";\n  if (r1 >= l / 2) {\n    r1 = min(iw, ih) / 2;\n    c.beginPath();\n    c.moveTo(iw / 2, ih / 2);\n    c.arc(iw / 2, ih / 2, r1, 0, 2 * Math.PI, false);\n    c.fill();\n    c.closePath();\n  } else {\n    r1 = min(iw / 2, ih / 2, r1);\n    RRect(c, 0, 0, iw, ih, r1, true);\n    c.fill();\n  }\n  c.globalCompositeOperation = \"source-in\";\n  c.drawImage(i, 0, 0, iw, ih);\n  return cv;\n}\n/**\n * Creates a new canvas containing the image and its shadow\n * Returns an object containing the image and its dimensions at z=0\n */\nfunction AddShadowToImage(i, w, h, scale, sc, sb, so) {\n  var sw = abs(so[0]),\n    sh = abs(so[1]),\n    cw = w + (sw > sb ? sw + sb : sb * 2) * scale,\n    ch = h + (sh > sb ? sh + sb : sb * 2) * scale,\n    xo = scale * ((sb || 0) + (so[0] < 0 ? sw : 0)),\n    yo = scale * ((sb || 0) + (so[1] < 0 ? sh : 0)),\n    cv,\n    c;\n  cv = NewCanvas(cw, ch);\n  if (!cv) return null;\n  c = cv.getContext(\"2d\");\n  sc && (c.shadowColor = sc);\n  sb && (c.shadowBlur = sb * scale);\n  if (so) {\n    c.shadowOffsetX = so[0] * scale;\n    c.shadowOffsetY = so[1] * scale;\n  }\n  c.drawImage(i, xo, yo, w, h);\n  return { image: cv, width: cw / scale, height: ch / scale };\n}\nfunction FindTextBoundingBox(s, f, ht) {\n  var w = parseInt(s.toString().length * ht),\n    h = parseInt(ht * 2 * s.length),\n    cv = NewCanvas(w, h),\n    c,\n    idata,\n    w1,\n    h1,\n    x,\n    y,\n    i,\n    ex;\n  if (!cv) return null;\n  c = cv.getContext(\"2d\");\n  c.fillStyle = \"#000\";\n  c.fillRect(0, 0, w, h);\n  TextSet(c, ht + \"px \" + f, \"#fff\", s, 0, 0, 0, 0, [], \"centre\");\n\n  idata = c.getImageData(0, 0, w, h);\n  w1 = idata.width;\n  h1 = idata.height;\n  ex = {\n    min: { x: w1, y: h1 },\n    max: { x: -1, y: -1 },\n  };\n  for (y = 0; y < h1; ++y) {\n    for (x = 0; x < w1; ++x) {\n      i = (y * w1 + x) * 4;\n      if (idata.data[i + 1] > 0) {\n        if (x < ex.min.x) ex.min.x = x;\n        if (x > ex.max.x) ex.max.x = x;\n        if (y < ex.min.y) ex.min.y = y;\n        if (y > ex.max.y) ex.max.y = y;\n      }\n    }\n  }\n  // device pixels might not be css pixels\n  if (w1 != w) {\n    ex.min.x *= w / w1;\n    ex.max.x *= w / w1;\n  }\n  if (h1 != h) {\n    ex.min.y *= w / h1;\n    ex.max.y *= w / h1;\n  }\n\n  cv = null;\n  return ex;\n}\nfunction FixFont(f) {\n  return \"'\" + f.replace(/(\\'|\\\")/g, \"\").replace(/\\s*,\\s*/g, \"', '\") + \"'\";\n}\nfunction AddHandler(h, f, e) {\n  e = e || doc;\n  if (e.addEventListener) e.addEventListener(h, f, false);\n  else e.attachEvent(\"on\" + h, f);\n}\nfunction RemoveHandler(h, f, e) {\n  e = e || doc;\n  if (e.removeEventListener) e.removeEventListener(h, f);\n  else e.detachEvent(\"on\" + h, f);\n}\nfunction AddImage(i, o, t, tc) {\n  var s = tc.imageScale,\n    mscale,\n    ic,\n    bc,\n    oc,\n    iw,\n    ih;\n  // image not loaded, wait for image onload\n  if (!o.complete)\n    return AddHandler(\n      \"load\",\n      function () {\n        AddImage(i, o, t, tc);\n      },\n      o\n    );\n  if (!i.complete)\n    return AddHandler(\n      \"load\",\n      function () {\n        AddImage(i, o, t, tc);\n      },\n      i\n    );\n\n  // Yes, this does look like nonsense, but it makes sure that both the\n  // width and height are actually set and not just calculated. This is\n  // required to keep proportional sizes when the images are hidden, so\n  // the images can be used again for another cloud.\n  o.width = o.width;\n  o.height = o.height;\n\n  if (s) {\n    i.width = o.width * s;\n    i.height = o.height * s;\n  }\n  // the standard width of the image, with imageScale applied\n  t.iw = i.width;\n  t.ih = i.height;\n  if (tc.txtOpt) {\n    ic = i;\n    mscale = tc.zoomMax * tc.txtScale;\n    iw = t.iw * mscale;\n    ih = t.ih * mscale;\n    if (iw < o.naturalWidth || ih < o.naturalHeight) {\n      ic = ScaleImage(i, iw, ih);\n      if (ic) t.fimage = ic;\n    } else {\n      iw = t.iw;\n      ih = t.ih;\n      mscale = 1;\n    }\n    if (parseFloat(tc.imageRadius))\n      t.image = t.fimage = i = RoundImage(\n        t.image,\n        tc.imageRadius,\n        iw,\n        ih,\n        mscale\n      );\n    if (!t.HasText()) {\n      if (tc.shadow) {\n        ic = AddShadowToImage(\n          t.image,\n          iw,\n          ih,\n          mscale,\n          tc.shadow,\n          tc.shadowBlur,\n          tc.shadowOffset\n        );\n        if (ic) {\n          t.fimage = ic.image;\n          t.w = ic.width;\n          t.h = ic.height;\n        }\n      }\n      if (tc.bgColour || tc.bgOutlineThickness) {\n        bc =\n          tc.bgColour == \"tag\"\n            ? GetProperty(t.a, \"background-color\")\n            : tc.bgColour;\n        oc =\n          tc.bgOutline == \"tag\"\n            ? GetProperty(t.a, \"color\")\n            : tc.bgOutline || tc.textColour;\n        iw = t.fimage.width;\n        ih = t.fimage.height;\n        if (tc.outlineMethod == \"colour\") {\n          // create the outline version first, using the current image state\n          ic = AddBackgroundToImage(\n            t.fimage,\n            iw,\n            ih,\n            mscale,\n            bc,\n            tc.bgOutlineThickness,\n            t.outline.colour,\n            tc.padding,\n            tc.bgRadius,\n            1\n          );\n          if (ic) t.oimage = ic.image;\n        }\n        ic = AddBackgroundToImage(\n          t.fimage,\n          iw,\n          ih,\n          mscale,\n          bc,\n          tc.bgOutlineThickness,\n          oc,\n          tc.padding,\n          tc.bgRadius\n        );\n        if (ic) {\n          t.fimage = ic.image;\n          t.w = ic.width;\n          t.h = ic.height;\n        }\n      }\n      if (tc.outlineMethod == \"size\") {\n        if (tc.outlineIncrease > 0) {\n          t.iw += 2 * tc.outlineIncrease;\n          t.ih += 2 * tc.outlineIncrease;\n          iw = mscale * t.iw;\n          ih = mscale * t.ih;\n          ic = ScaleImage(t.fimage, iw, ih);\n          t.oimage = ic;\n          t.fimage = ExpandImage(t.fimage, t.oimage.width, t.oimage.height);\n        } else {\n          iw = mscale * (t.iw + 2 * tc.outlineIncrease);\n          ih = mscale * (t.ih + 2 * tc.outlineIncrease);\n          ic = ScaleImage(t.fimage, iw, ih);\n          t.oimage = ExpandImage(ic, t.fimage.width, t.fimage.height);\n        }\n      }\n    }\n  }\n  t.Init();\n}\nfunction GetProperty(e, p) {\n  var dv = doc.defaultView,\n    pc = p.replace(/\\-([a-z])/g, function (a) {\n      return a.charAt(1).toUpperCase();\n    });\n  return (\n    (dv &&\n      dv.getComputedStyle &&\n      dv.getComputedStyle(e, null).getPropertyValue(p)) ||\n    (e.currentStyle && e.currentStyle[pc])\n  );\n}\nfunction FindWeight(a, wFrom, tHeight) {\n  var w = 1,\n    p;\n  if (wFrom) {\n    w = 1 * (a.getAttribute(wFrom) || tHeight);\n  } else if ((p = GetProperty(a, \"font-size\"))) {\n    w =\n      (p.indexOf(\"px\") > -1 && p.replace(\"px\", \"\") * 1) ||\n      (p.indexOf(\"pt\") > -1 && p.replace(\"pt\", \"\") * 1.25) ||\n      p * 3.3;\n  }\n  return w;\n}\nfunction EventToCanvasId(e) {\n  return e.target && Defined(e.target.id)\n    ? e.target.id\n    : e.srcElement.parentNode.id;\n}\nfunction EventXY(e, c) {\n  var xy,\n    p,\n    xmul = parseInt(GetProperty(c, \"width\")) / c.width,\n    ymul = parseInt(GetProperty(c, \"height\")) / c.height;\n  if (Defined(e.offsetX)) {\n    xy = { x: e.offsetX, y: e.offsetY };\n  } else {\n    p = AbsPos(c.id);\n    if (Defined(e.changedTouches)) e = e.changedTouches[0];\n    if (e.pageX) xy = { x: e.pageX - p.x, y: e.pageY - p.y };\n  }\n  if (xy && xmul && ymul) {\n    xy.x /= xmul;\n    xy.y /= ymul;\n  }\n  return xy;\n}\nfunction MouseOut(e) {\n  var cv = e.target || e.fromElement.parentNode,\n    tc = TagCanvas.tc[cv.id];\n  if (tc) {\n    tc.mx = tc.my = -1;\n    tc.UnFreeze();\n    tc.EndDrag();\n  }\n}\nfunction MouseMove(e) {\n  var i,\n    t = TagCanvas,\n    tc,\n    p,\n    tg = EventToCanvasId(e);\n  for (i in t.tc) {\n    tc = t.tc[i];\n    if (tc.tttimer) {\n      clearTimeout(tc.tttimer);\n      tc.tttimer = null;\n    }\n  }\n  if (tg && t.tc[tg]) {\n    tc = t.tc[tg];\n    if ((p = EventXY(e, tc.canvas))) {\n      tc.mx = p.x;\n      tc.my = p.y;\n      tc.Drag(e, p);\n    }\n    tc.drawn = 0;\n  }\n}\nfunction MouseDown(e) {\n  var t = TagCanvas,\n    cb = doc.addEventListener ? 0 : 1,\n    tg = EventToCanvasId(e);\n  if (tg && e.button == cb && t.tc[tg]) {\n    t.tc[tg].BeginDrag(e);\n  }\n}\nfunction MouseUp(e) {\n  var t = TagCanvas,\n    cb = doc.addEventListener ? 0 : 1,\n    tg = EventToCanvasId(e),\n    tc;\n  if (tg && e.button == cb && t.tc[tg]) {\n    tc = t.tc[tg];\n    MouseMove(e);\n    if (!tc.EndDrag() && !tc.touchState) tc.Clicked(e);\n  }\n}\nfunction TouchDown(e) {\n  var tg = EventToCanvasId(e),\n    tc = tg && TagCanvas.tc[tg],\n    p;\n  if (tc && e.changedTouches) {\n    if (e.touches.length == 1 && tc.touchState == 0) {\n      tc.touchState = 1;\n      tc.BeginDrag(e);\n      if ((p = EventXY(e, tc.canvas))) {\n        tc.mx = p.x;\n        tc.my = p.y;\n        tc.drawn = 0;\n      }\n    } else if (e.targetTouches.length == 2 && tc.pinchZoom) {\n      tc.touchState = 3;\n      tc.EndDrag();\n      tc.BeginPinch(e);\n    } else {\n      tc.EndDrag();\n      tc.EndPinch();\n      tc.touchState = 0;\n    }\n  }\n}\nfunction TouchUp(e) {\n  var tg = EventToCanvasId(e),\n    tc = tg && TagCanvas.tc[tg];\n  if (tc && e.changedTouches) {\n    switch (tc.touchState) {\n      case 1:\n        tc.Draw();\n        tc.Clicked();\n        break;\n      case 2:\n        tc.EndDrag();\n        break;\n      case 3:\n        tc.EndPinch();\n    }\n    tc.touchState = 0;\n  }\n}\nfunction TouchMove(e) {\n  var i,\n    t = TagCanvas,\n    tc,\n    p,\n    tg = EventToCanvasId(e);\n  for (i in t.tc) {\n    tc = t.tc[i];\n    if (tc.tttimer) {\n      clearTimeout(tc.tttimer);\n      tc.tttimer = null;\n    }\n  }\n  tc = tg && t.tc[tg];\n  if (tc && e.changedTouches && tc.touchState) {\n    switch (tc.touchState) {\n      case 1:\n      case 2:\n        if ((p = EventXY(e, tc.canvas))) {\n          tc.mx = p.x;\n          tc.my = p.y;\n          if (tc.Drag(e, p)) tc.touchState = 2;\n        }\n        break;\n      case 3:\n        tc.Pinch(e);\n    }\n    tc.drawn = 0;\n  }\n}\nfunction MouseWheel(e) {\n  var t = TagCanvas,\n    tg = EventToCanvasId(e);\n  if (tg && t.tc[tg]) {\n    e.cancelBubble = true;\n    e.returnValue = false;\n    e.preventDefault && e.preventDefault();\n    t.tc[tg].Wheel((e.wheelDelta || e.detail) > 0);\n  }\n}\nfunction Scroll(e) {\n  var i,\n    t = TagCanvas;\n  clearTimeout(t.scrollTimer);\n  for (i in t.tc) {\n    t.tc[i].Pause();\n  }\n  t.scrollTimer = setTimeout(function () {\n    var i,\n      t = TagCanvas;\n    for (i in t.tc) {\n      t.tc[i].Resume();\n    }\n  }, t.scrollPause);\n}\nfunction DrawCanvas() {\n  DrawCanvasRAF(TimeNow());\n}\nfunction DrawCanvasRAF(t) {\n  var tc = TagCanvas.tc,\n    i;\n  TagCanvas.NextFrame(TagCanvas.interval);\n  t = t || TimeNow();\n  for (i in tc) tc[i].Draw(t);\n}\nfunction AbsPos(id) {\n  var e = doc.getElementById(id),\n    r = e.getBoundingClientRect(),\n    dd = doc.documentElement,\n    b = doc.body,\n    w = window,\n    xs = w.pageXOffset || dd.scrollLeft,\n    ys = w.pageYOffset || dd.scrollTop,\n    xo = dd.clientLeft || b.clientLeft,\n    yo = dd.clientTop || b.clientTop;\n  return { x: r.left + xs - xo, y: r.top + ys - yo };\n}\nfunction Project(tc, p1, sx, sy) {\n  var m = (tc.radius * tc.z1) / (tc.z1 + tc.z2 + p1.z);\n  return {\n    x: p1.x * m * sx,\n    y: p1.y * m * sy,\n    z: p1.z,\n    w: (tc.z1 - p1.z) / tc.z2,\n  };\n}\n/**\n * @constructor\n * for recursively splitting tag contents on <br> tags\n */\nfunction TextSplitter(e) {\n  this.e = e;\n  this.br = 0;\n  this.line = [];\n  this.text = [];\n  this.original = e.innerText || e.textContent;\n}\nTSproto = TextSplitter.prototype;\nTSproto.Empty = function () {\n  for (var i = 0; i < this.text.length; ++i)\n    if (this.text[i].length) return false;\n  return true;\n};\nTSproto.Lines = function (e) {\n  var r = e ? 1 : 0,\n    cn,\n    cl,\n    i;\n  e = e || this.e;\n  cn = e.childNodes;\n  cl = cn.length;\n\n  for (i = 0; i < cl; ++i) {\n    if (cn[i].nodeName == \"BR\") {\n      this.text.push(this.line.join(\" \"));\n      this.br = 1;\n    } else if (cn[i].nodeType == 3) {\n      if (this.br) {\n        this.line = [cn[i].nodeValue];\n        this.br = 0;\n      } else {\n        this.line.push(cn[i].nodeValue);\n      }\n    } else {\n      this.Lines(cn[i]);\n    }\n  }\n  r || this.br || this.text.push(this.line.join(\" \"));\n  return this.text;\n};\nTSproto.SplitWidth = function (w, c, f, h) {\n  var i,\n    j,\n    words,\n    text = [];\n  c.font = h + \"px \" + f;\n  for (i = 0; i < this.text.length; ++i) {\n    words = this.text[i].split(/\\s+/);\n    this.line = [words[0]];\n    for (j = 1; j < words.length; ++j) {\n      if (c.measureText(this.line.join(\" \") + \" \" + words[j]).width > w) {\n        text.push(this.line.join(\" \"));\n        this.line = [words[j]];\n      } else {\n        this.line.push(words[j]);\n      }\n    }\n    text.push(this.line.join(\" \"));\n  }\n  return (this.text = text);\n};\n/**\n * @constructor\n */\nfunction Outline(tc, t) {\n  this.ts = null;\n  this.tc = tc;\n  this.tag = t;\n  this.x = this.y = this.w = this.h = this.sc = 1;\n  this.z = 0;\n  this.pulse = 1;\n  this.pulsate = tc.pulsateTo < 1;\n  this.colour = tc.outlineColour;\n  this.adash = ~~tc.outlineDash;\n  this.agap = ~~tc.outlineDashSpace || this.adash;\n  this.aspeed = tc.outlineDashSpeed * 1;\n  if (this.colour == \"tag\") this.colour = GetProperty(t.a, \"color\");\n  else if (this.colour == \"tagbg\")\n    this.colour = GetProperty(t.a, \"background-color\");\n  this.Draw = this.pulsate ? this.DrawPulsate : this.DrawSimple;\n  this.radius = tc.outlineRadius | 0;\n  this.SetMethod(tc.outlineMethod);\n}\nOproto = Outline.prototype;\nOproto.SetMethod = function (om) {\n  var methods = {\n      block: [\"PreDraw\", \"DrawBlock\"],\n      colour: [\"PreDraw\", \"DrawColour\"],\n      outline: [\"PostDraw\", \"DrawOutline\"],\n      classic: [\"LastDraw\", \"DrawOutline\"],\n      size: [\"PreDraw\", \"DrawSize\"],\n      none: [\"LastDraw\"],\n    },\n    funcs = methods[om] || methods.outline;\n  if (om == \"none\") {\n    this.Draw = function () {\n      return 1;\n    };\n  } else {\n    this.drawFunc = this[funcs[1]];\n  }\n  this[funcs[0]] = this.Draw;\n};\nOproto.Update = function (x, y, w, h, sc, z, xo, yo) {\n  var o = this.tc.outlineOffset,\n    o2 = 2 * o;\n  this.x = sc * x + xo - o;\n  this.y = sc * y + yo - o;\n  this.w = sc * w + o2;\n  this.h = sc * h + o2;\n  this.sc = sc; // used to determine frontmost\n  this.z = z;\n};\nOproto.Ants = function (c) {\n  if (!this.adash) return;\n  var l = this.adash,\n    g = this.agap,\n    s = this.aspeed,\n    length = l + g,\n    l1 = 0,\n    l2 = l,\n    g1 = g,\n    g2 = 0,\n    seq = 0,\n    ants;\n  if (s) {\n    seq = (abs(s) * (TimeNow() - this.ts)) / 50;\n    if (s < 0) seq = 8.64e6 - seq;\n    s = ~~seq % length;\n  }\n  if (s) {\n    if (l >= s) {\n      l1 = l - s;\n      l2 = s;\n    } else {\n      g1 = length - s;\n      g2 = g - g1;\n    }\n    ants = [l1, g1, l2, g2];\n  } else {\n    ants = [l, g];\n  }\n  c.setLineDash(ants);\n};\nOproto.DrawOutline = function (c, x, y, w, h, colour) {\n  var r = min(this.radius, h / 2, w / 2);\n  c.strokeStyle = colour;\n  this.Ants(c);\n  RRect(c, x, y, w, h, r, true);\n};\nOproto.DrawSize = function (c, x, y, w, h, colour, tag, x1, y1) {\n  var tw = tag.w,\n    th = tag.h,\n    m,\n    i,\n    sc;\n  if (this.pulsate) {\n    if (tag.image)\n      sc = (tag.image.height + this.tc.outlineIncrease) / tag.image.height;\n    else sc = tag.oscale;\n    i = tag.fimage || tag.image;\n    m = 1 + (sc - 1) * (1 - this.pulse);\n    tag.h *= m;\n    tag.w *= m;\n  } else {\n    i = tag.oimage;\n  }\n  tag.alpha = 1;\n  tag.Draw(c, x1, y1, i);\n  tag.h = th;\n  tag.w = tw;\n  return 1;\n};\nOproto.DrawColour = function (c, x, y, w, h, colour, tag, x1, y1) {\n  if (tag.oimage) {\n    if (this.pulse < 1) {\n      tag.alpha = 1 - pow(this.pulse, 2);\n      tag.Draw(c, x1, y1, tag.fimage);\n      tag.alpha = this.pulse;\n    } else {\n      tag.alpha = 1;\n    }\n    tag.Draw(c, x1, y1, tag.oimage);\n    return 1;\n  }\n  return this[tag.image ? \"DrawColourImage\" : \"DrawColourText\"](\n    c,\n    x,\n    y,\n    w,\n    h,\n    colour,\n    tag,\n    x1,\n    y1\n  );\n};\nOproto.DrawColourText = function (c, x, y, w, h, colour, tag, x1, y1) {\n  var normal = tag.colour;\n  tag.colour = colour;\n  tag.alpha = 1;\n  tag.Draw(c, x1, y1);\n  tag.colour = normal;\n  return 1;\n};\nOproto.DrawColourImage = function (c, x, y, w, h, colour, tag, x1, y1) {\n  var ccanvas = c.canvas,\n    fx = ~~max(x, 0),\n    fy = ~~max(y, 0),\n    fw = (min(ccanvas.width - fx, w) + 0.5) | 0,\n    fh = (min(ccanvas.height - fy, h) + 0.5) | 0,\n    cc;\n  if (ocanvas) {\n    ocanvas.width = fw;\n    ocanvas.height = fh;\n  } else ocanvas = NewCanvas(fw, fh);\n  if (!ocanvas) return this.SetMethod(\"outline\"); // if using IE and images, give up!\n  cc = ocanvas.getContext(\"2d\");\n\n  cc.drawImage(ccanvas, fx, fy, fw, fh, 0, 0, fw, fh);\n  c.clearRect(fx, fy, fw, fh);\n  if (this.pulsate) {\n    tag.alpha = 1 - pow(this.pulse, 2);\n  } else {\n    tag.alpha = 1;\n  }\n  tag.Draw(c, x1, y1);\n  c.setTransform(1, 0, 0, 1, 0, 0);\n  c.save();\n  c.beginPath();\n  c.rect(fx, fy, fw, fh);\n  c.clip();\n  c.globalCompositeOperation = \"source-in\";\n  c.fillStyle = colour;\n  c.fillRect(fx, fy, fw, fh);\n  c.restore();\n  c.globalAlpha = 1;\n  c.globalCompositeOperation = \"destination-over\";\n  c.drawImage(ocanvas, 0, 0, fw, fh, fx, fy, fw, fh);\n  c.globalCompositeOperation = \"source-over\";\n  return 1;\n};\nOproto.DrawBlock = function (c, x, y, w, h, colour) {\n  var r = min(this.radius, h / 2, w / 2);\n  c.fillStyle = colour;\n  RRect(c, x, y, w, h, r);\n};\nOproto.DrawSimple = function (c, tag, x1, y1, ga, useGa) {\n  var t = this.tc;\n  c.setTransform(1, 0, 0, 1, 0, 0);\n  c.strokeStyle = this.colour;\n  c.lineWidth = t.outlineThickness;\n  c.shadowBlur = c.shadowOffsetX = c.shadowOffsetY = 0;\n  c.globalAlpha = useGa ? ga : 1;\n  return this.drawFunc(\n    c,\n    this.x,\n    this.y,\n    this.w,\n    this.h,\n    this.colour,\n    tag,\n    x1,\n    y1\n  );\n};\nOproto.DrawPulsate = function (c, tag, x1, y1) {\n  var diff = TimeNow() - this.ts,\n    t = this.tc,\n    ga =\n      t.pulsateTo +\n      (1 - t.pulsateTo) *\n        (0.5 + cos((2 * Math.PI * diff) / (1000 * t.pulsateTime)) / 2);\n  this.pulse = ga = TagCanvas.Smooth(1, ga);\n  return this.DrawSimple(c, tag, x1, y1, ga, 1);\n};\nOproto.Active = function (c, x, y) {\n  var a =\n    x >= this.x && y >= this.y && x <= this.x + this.w && y <= this.y + this.h;\n  if (a) {\n    this.ts = this.ts || TimeNow();\n  } else {\n    this.ts = null;\n  }\n  return a;\n};\nOproto.PreDraw = Oproto.PostDraw = Oproto.LastDraw = Nop;\n/**\n * @constructor\n */\nfunction Tag(\n  tc,\n  text,\n  a,\n  v,\n  w,\n  h,\n  col,\n  bcol,\n  bradius,\n  boutline,\n  bothickness,\n  font,\n  padding,\n  original\n) {\n  this.tc = tc;\n  this.image = null;\n  this.text = text;\n  this.text_original = original;\n  this.line_widths = [];\n  this.title = a.title || null;\n  this.a = a;\n  this.position = new Vector(v[0], v[1], v[2]);\n  this.x = this.y = this.z = 0;\n  this.w = w;\n  this.h = h;\n  this.colour = col || tc.textColour;\n  this.bgColour = bcol || tc.bgColour;\n  this.bgRadius = bradius | 0;\n  this.bgOutline = boutline || this.colour;\n  this.bgOutlineThickness = bothickness | 0;\n  this.textFont = font || tc.textFont;\n  this.padding = padding | 0;\n  this.sc = this.alpha = 1;\n  this.weighted = !tc.weight;\n  this.outline = new Outline(tc, this);\n}\nTproto = Tag.prototype;\nTproto.Init = function (e) {\n  var tc = this.tc;\n  this.textHeight = tc.textHeight;\n  if (this.HasText()) {\n    this.Measure(tc.ctxt, tc);\n  } else {\n    this.w = this.iw;\n    this.h = this.ih;\n  }\n\n  this.SetShadowColour = tc.shadowAlpha\n    ? this.SetShadowColourAlpha\n    : this.SetShadowColourFixed;\n  this.SetDraw(tc);\n};\nTproto.Draw = Nop;\nTproto.HasText = function () {\n  return this.text && this.text[0].length > 0;\n};\nTproto.EqualTo = function (e) {\n  var i = e.getElementsByTagName(\"img\");\n  if (this.a.href != e.href) return 0;\n  if (i.length) return this.image.src == i[0].src;\n  return (e.innerText || e.textContent) == this.text_original;\n};\nTproto.SetImage = function (i) {\n  this.image = this.fimage = i;\n};\nTproto.SetDraw = function (t) {\n  this.Draw = this.fimage\n    ? t.ie > 7\n      ? this.DrawImageIE\n      : this.DrawImage\n    : this.DrawText;\n  t.noSelect && (this.CheckActive = Nop);\n};\nTproto.MeasureText = function (c) {\n  var i,\n    l = this.text.length,\n    w = 0,\n    wl;\n  for (i = 0; i < l; ++i) {\n    this.line_widths[i] = wl = c.measureText(this.text[i]).width;\n    w = max(w, wl);\n  }\n  return w;\n};\nTproto.Measure = function (c, t) {\n  var extents = FindTextBoundingBox(this.text, this.textFont, this.textHeight),\n    s,\n    th,\n    f,\n    soff,\n    cw,\n    twidth,\n    theight,\n    img,\n    tcv;\n  // add the gap at the top to the height to make equal gap at bottom\n  theight = extents ? extents.max.y + extents.min.y : this.textHeight;\n  c.font = this.font = this.textHeight + \"px \" + this.textFont;\n  twidth = this.MeasureText(c);\n  if (t.txtOpt) {\n    s = t.txtScale;\n    th = s * this.textHeight;\n    f = th + \"px \" + this.textFont;\n    soff = [s * t.shadowOffset[0], s * t.shadowOffset[1]];\n    c.font = f;\n    cw = this.MeasureText(c);\n    tcv = new TextCanvas(\n      this.text,\n      f,\n      cw + s,\n      s * theight + s,\n      cw,\n      this.line_widths,\n      t.textAlign,\n      t.textVAlign,\n      s\n    );\n\n    if (this.image)\n      tcv.SetImage(\n        this.image,\n        this.iw,\n        this.ih,\n        t.imagePosition,\n        t.imagePadding,\n        t.imageAlign,\n        t.imageVAlign,\n        t.imageScale\n      );\n\n    img = tcv.Create(\n      this.colour,\n      this.bgColour,\n      this.bgOutline,\n      s * this.bgOutlineThickness,\n      t.shadow,\n      s * t.shadowBlur,\n      soff,\n      s * this.padding,\n      s * this.bgRadius\n    );\n\n    // add outline image using highlight colour\n    if (t.outlineMethod == \"colour\") {\n      this.oimage = tcv.Create(\n        this.outline.colour,\n        this.bgColour,\n        this.outline.colour,\n        s * this.bgOutlineThickness,\n        t.shadow,\n        s * t.shadowBlur,\n        soff,\n        s * this.padding,\n        s * this.bgRadius\n      );\n    } else if (t.outlineMethod == \"size\") {\n      extents = FindTextBoundingBox(\n        this.text,\n        this.textFont,\n        this.textHeight + t.outlineIncrease\n      );\n      th = extents.max.y + extents.min.y;\n      f = s * (this.textHeight + t.outlineIncrease) + \"px \" + this.textFont;\n      c.font = f;\n      cw = this.MeasureText(c);\n\n      tcv = new TextCanvas(\n        this.text,\n        f,\n        cw + s,\n        s * th + s,\n        cw,\n        this.line_widths,\n        t.textAlign,\n        t.textVAlign,\n        s\n      );\n      if (this.image)\n        tcv.SetImage(\n          this.image,\n          this.iw + t.outlineIncrease,\n          this.ih + t.outlineIncrease,\n          t.imagePosition,\n          t.imagePadding,\n          t.imageAlign,\n          t.imageVAlign,\n          t.imageScale\n        );\n\n      this.oimage = tcv.Create(\n        this.colour,\n        this.bgColour,\n        this.bgOutline,\n        s * this.bgOutlineThickness,\n        t.shadow,\n        s * t.shadowBlur,\n        soff,\n        s * this.padding,\n        s * this.bgRadius\n      );\n\n      this.oscale = this.oimage.width / img.width;\n      if (t.outlineIncrease > 0)\n        img = ExpandImage(img, this.oimage.width, this.oimage.height);\n      else this.oimage = ExpandImage(this.oimage, img.width, img.height);\n    }\n    if (img) {\n      this.fimage = img;\n      twidth = this.fimage.width / s;\n      theight = this.fimage.height / s;\n    }\n    this.SetDraw(t);\n    t.txtOpt = !!this.fimage;\n  }\n  this.h = theight;\n  this.w = twidth;\n};\nTproto.SetFont = function (f, c, bc, boc) {\n  this.textFont = f;\n  this.colour = c;\n  this.bgColour = bc;\n  this.bgOutline = boc;\n  this.Measure(this.tc.ctxt, this.tc);\n};\nTproto.SetWeight = function (w) {\n  var tc = this.tc,\n    modes = tc.weightMode.split(/[, ]/),\n    m,\n    s,\n    wl = w.length;\n  if (!this.HasText()) return;\n  this.weighted = true;\n  for (s = 0; s < wl; ++s) {\n    m = modes[s] || \"size\";\n    if (\"both\" == m) {\n      this.Weight(\n        w[s],\n        tc.ctxt,\n        tc,\n        \"size\",\n        tc.min_weight[s],\n        tc.max_weight[s],\n        s\n      );\n      this.Weight(\n        w[s],\n        tc.ctxt,\n        tc,\n        \"colour\",\n        tc.min_weight[s],\n        tc.max_weight[s],\n        s\n      );\n    } else {\n      this.Weight(w[s], tc.ctxt, tc, m, tc.min_weight[s], tc.max_weight[s], s);\n    }\n  }\n  this.Measure(tc.ctxt, tc);\n};\nTproto.Weight = function (w, c, t, m, wmin, wmax, wnum) {\n  w = isNaN(w) ? 1 : w;\n  var nweight = (w - wmin) / (wmax - wmin);\n  if (\"colour\" == m) this.colour = FindGradientColour(t, nweight, wnum);\n  else if (\"bgcolour\" == m)\n    this.bgColour = FindGradientColour(t, nweight, wnum);\n  else if (\"bgoutline\" == m)\n    this.bgOutline = FindGradientColour(t, nweight, wnum);\n  else if (\"outline\" == m)\n    this.outline.colour = FindGradientColour(t, nweight, wnum);\n  else if (\"size\" == m) {\n    if (t.weightSizeMin > 0 && t.weightSizeMax > t.weightSizeMin) {\n      this.textHeight =\n        t.weightSize *\n        (t.weightSizeMin + (t.weightSizeMax - t.weightSizeMin) * nweight);\n    } else {\n      // min textHeight of 1\n      this.textHeight = max(1, w * t.weightSize);\n    }\n  }\n};\nTproto.SetShadowColourFixed = function (c, s, a) {\n  c.shadowColor = s;\n};\nTproto.SetShadowColourAlpha = function (c, s, a) {\n  c.shadowColor = SetAlpha(s, a);\n};\nTproto.DrawText = function (c, xoff, yoff) {\n  var t = this.tc,\n    x = this.x,\n    y = this.y,\n    s = this.sc,\n    i,\n    xl;\n  c.globalAlpha = this.alpha;\n  c.fillStyle = this.colour;\n  t.shadow && this.SetShadowColour(c, t.shadow, this.alpha);\n  c.font = this.font;\n  x += xoff / s;\n  y += yoff / s - this.h / 2;\n  for (i = 0; i < this.text.length; ++i) {\n    xl = x;\n    if (\"right\" == t.textAlign) {\n      xl += this.w / 2 - this.line_widths[i];\n    } else if (\"centre\" == t.textAlign) {\n      xl -= this.line_widths[i] / 2;\n    } else {\n      xl -= this.w / 2;\n    }\n    c.setTransform(s, 0, 0, s, s * xl, s * y);\n    c.fillText(this.text[i], 0, 0);\n    y += this.textHeight;\n  }\n};\nTproto.DrawImage = function (c, xoff, yoff, im) {\n  var x = this.x,\n    y = this.y,\n    s = this.sc,\n    i = im || this.fimage,\n    w = this.w,\n    h = this.h,\n    a = this.alpha,\n    shadow = this.shadow;\n  c.globalAlpha = a;\n  shadow && this.SetShadowColour(c, shadow, a);\n  x += xoff / s - w / 2;\n  y += yoff / s - h / 2;\n  c.setTransform(s, 0, 0, s, s * x, s * y);\n  c.drawImage(i, 0, 0, w, h);\n};\nTproto.DrawImageIE = function (c, xoff, yoff) {\n  var i = this.fimage,\n    s = this.sc,\n    w = (i.width = this.w * s),\n    h = (i.height = this.h * s),\n    x = this.x * s + xoff - w / 2,\n    y = this.y * s + yoff - h / 2;\n  c.setTransform(1, 0, 0, 1, 0, 0);\n  c.globalAlpha = this.alpha;\n  c.drawImage(i, x, y);\n};\nTproto.Calc = function (m, a) {\n  var pp,\n    t = this.tc,\n    mnb = t.minBrightness,\n    mxb = t.maxBrightness,\n    r = t.max_radius;\n  pp = m.xform(this.position);\n  this.xformed = pp;\n  pp = Project(t, pp, t.stretchX, t.stretchY);\n  this.x = pp.x;\n  this.y = pp.y;\n  this.z = pp.z;\n  this.sc = pp.w;\n  this.alpha = a * Clamp(mnb + ((mxb - mnb) * (r - this.z)) / (2 * r), 0, 1);\n  return this.xformed;\n};\nTproto.UpdateActive = function (c, xoff, yoff) {\n  var o = this.outline,\n    w = this.w,\n    h = this.h,\n    x = this.x - w / 2,\n    y = this.y - h / 2;\n  o.Update(x, y, w, h, this.sc, this.z, xoff, yoff);\n  return o;\n};\nTproto.CheckActive = function (c, xoff, yoff) {\n  var t = this.tc,\n    o = this.UpdateActive(c, xoff, yoff);\n  return o.Active(c, t.mx, t.my) ? o : null;\n};\nTproto.Clicked = function (e) {\n  var a = this.a,\n    t = a.target,\n    h = a.href,\n    evt;\n  if (t != \"\" && t != \"_self\") {\n    // if (self.frames[t]) {\n    //   self.frames[t].document.location = h;\n    // } else {\n    //   try {\n    //     if (top.frames[t]) {\n    //       top.frames[t].document.location = h;\n    //       return;\n    //     }\n    //   } catch (err) {\n    //     // different domain/port/protocol?\n    //   }\n    window.open(h, t);\n\n    return;\n  }\n  if (doc.createEvent) {\n    evt = doc.createEvent(\"MouseEvents\");\n    evt.initMouseEvent(\n      \"click\",\n      1,\n      1,\n      window,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      null\n    );\n    if (!a.dispatchEvent(evt)) return;\n  } else if (a.fireEvent) {\n    if (!a.fireEvent(\"onclick\")) return;\n  }\n  doc.location = h;\n};\n/**\n * @constructor\n */\nfunction TagCanvas(cid, lctr, opt) {\n  var i,\n    p,\n    c = doc.getElementById(cid),\n    cp = [\"id\", \"class\", \"innerHTML\"],\n    raf;\n\n  if (!c) throw 0;\n  if (Defined(window.G_vmlCanvasManager)) {\n    c = window.G_vmlCanvasManager.initElement(c);\n    this.ie = parseFloat(navigator.appVersion.split(\"MSIE\")[1]);\n  }\n  if (c && (!c.getContext || !c.getContext(\"2d\").fillText)) {\n    p = doc.createElement(\"DIV\");\n    for (i = 0; i < cp.length; ++i) p[cp[i]] = c[cp[i]];\n    c.parentNode.insertBefore(p, c);\n    c.parentNode.removeChild(c);\n    throw 0;\n  }\n  for (i in TagCanvas.options)\n    this[i] =\n      opt && Defined(opt[i])\n        ? opt[i]\n        : Defined(TagCanvas[i])\n        ? TagCanvas[i]\n        : TagCanvas.options[i];\n\n  this.canvas = c;\n  this.ctxt = c.getContext(\"2d\");\n  this.z1 = 250 / max(this.depth, 0.001);\n  this.z2 = this.z1 / this.zoom;\n  this.radius = min(c.height, c.width) * 0.0075; // fits radius of 100 in canvas\n  this.max_radius = 100;\n  this.max_weight = [];\n  this.min_weight = [];\n  this.textFont = this.textFont && FixFont(this.textFont);\n  this.textHeight *= 1;\n  this.imageRadius = this.imageRadius.toString();\n  this.pulsateTo = Clamp(this.pulsateTo, 0, 1);\n  this.minBrightness = Clamp(this.minBrightness, 0, 1);\n  this.maxBrightness = Clamp(this.maxBrightness, this.minBrightness, 1);\n  this.ctxt.textBaseline = \"top\";\n  this.lx = (this.lock + \"\").indexOf(\"x\") + 1;\n  this.ly = (this.lock + \"\").indexOf(\"y\") + 1;\n  this.frozen = this.dx = this.dy = this.fixedAnim = this.touchState = 0;\n  this.fixedAlpha = 1;\n  this.source = lctr || cid;\n  this.repeatTags = min(64, ~~this.repeatTags);\n  this.minTags = min(200, ~~this.minTags);\n  if (~~this.scrollPause > 0) TagCanvas.scrollPause = ~~this.scrollPause;\n  else this.scrollPause = 0;\n  if (this.minTags > 0 && this.repeatTags < 1 && (i = this.GetTags().length))\n    this.repeatTags = ceil(this.minTags / i) - 1;\n  this.transform = Matrix.Identity();\n  this.startTime = this.time = TimeNow();\n  this.mx = this.my = -1;\n  this.centreImage && CentreImage(this);\n  this.Animate = this.dragControl ? this.AnimateDrag : this.AnimatePosition;\n  this.animTiming =\n    typeof TagCanvas[this.animTiming] == \"function\"\n      ? TagCanvas[this.animTiming]\n      : TagCanvas.Smooth;\n  if (this.shadowBlur || this.shadowOffset[0] || this.shadowOffset[1]) {\n    // let the browser translate \"red\" into \"#ff0000\"\n    this.ctxt.shadowColor = this.shadow;\n    this.shadow = this.ctxt.shadowColor;\n    this.shadowAlpha = ShadowAlphaBroken();\n  } else {\n    delete this.shadow;\n  }\n  this.Load();\n  if (lctr && this.hideTags) {\n    (function (t) {\n      if (TagCanvas.loaded) t.HideTags();\n      else\n        AddHandler(\n          \"load\",\n          function () {\n            t.HideTags();\n          },\n          window\n        );\n    })(this);\n  }\n\n  this.yaw = this.initial ? this.initial[0] * this.maxSpeed : 0;\n  this.pitch = this.initial ? this.initial[1] * this.maxSpeed : 0;\n  if (this.tooltip) {\n    this.ctitle = c.title;\n    c.title = \"\";\n    if (this.tooltip == \"native\") {\n      this.Tooltip = this.TooltipNative;\n    } else {\n      this.Tooltip = this.TooltipDiv;\n      if (!this.ttdiv) {\n        this.ttdiv = doc.createElement(\"div\");\n        this.ttdiv.className = this.tooltipClass;\n        this.ttdiv.style.position = \"absolute\";\n        this.ttdiv.style.zIndex = c.style.zIndex + 1;\n        AddHandler(\n          \"mouseover\",\n          function (e) {\n            e.target.style.display = \"none\";\n          },\n          this.ttdiv\n        );\n        doc.body.appendChild(this.ttdiv);\n      }\n    }\n  } else {\n    this.Tooltip = this.TooltipNone;\n  }\n  if (!this.noMouse && !handlers[cid]) {\n    handlers[cid] = [\n      [\"mousemove\", MouseMove],\n      [\"mouseout\", MouseOut],\n      [\"mouseup\", MouseUp],\n      [\"touchstart\", TouchDown],\n      [\"touchend\", TouchUp],\n      [\"touchcancel\", TouchUp],\n      [\"touchmove\", TouchMove],\n    ];\n    if (this.dragControl) {\n      handlers[cid].push([\"mousedown\", MouseDown]);\n      handlers[cid].push([\"selectstart\", Nop]);\n    }\n    if (this.wheelZoom) {\n      handlers[cid].push([\"mousewheel\", MouseWheel]);\n      handlers[cid].push([\"DOMMouseScroll\", MouseWheel]);\n    }\n    if (this.scrollPause) {\n      handlers[cid].push([\"scroll\", Scroll, window]);\n    }\n    for (i = 0; i < handlers[cid].length; ++i) {\n      p = handlers[cid][i];\n      AddHandler(p[0], p[1], p[2] ? p[2] : c);\n    }\n  }\n  if (!TagCanvas.started) {\n    raf = window.requestAnimationFrame =\n      window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.msRequestAnimationFrame;\n    TagCanvas.NextFrame = raf\n      ? TagCanvas.NextFrameRAF\n      : TagCanvas.NextFrameTimeout;\n    TagCanvas.interval = this.interval;\n    TagCanvas.NextFrame(this.interval);\n    TagCanvas.started = 1;\n  }\n}\nTCproto = TagCanvas.prototype;\nTCproto.SourceElements = function () {\n  if (doc.querySelectorAll) return doc.querySelectorAll(\"#\" + this.source);\n  return [doc.getElementById(this.source)];\n};\nTCproto.HideTags = function () {\n  var el = this.SourceElements(),\n    i;\n  for (i = 0; i < el.length; ++i) el[i].style.display = \"none\";\n};\nTCproto.GetTags = function () {\n  var el = this.SourceElements(),\n    etl,\n    tl = [],\n    i,\n    j,\n    k;\n  for (k = 0; k <= this.repeatTags; ++k) {\n    for (i = 0; i < el.length; ++i) {\n      etl = el[i].getElementsByTagName(\"a\");\n      for (j = 0; j < etl.length; ++j) {\n        tl.push(etl[j]);\n      }\n    }\n  }\n  return tl;\n};\nTCproto.Message = function (text) {\n  var tl = [],\n    i,\n    p,\n    tc = text.split(\"\"),\n    a,\n    t,\n    x,\n    z;\n  for (i = 0; i < tc.length; ++i) {\n    if (tc[i] != \" \") {\n      p = i - tc.length / 2;\n      a = doc.createElement(\"A\");\n      a.href = \"#\";\n      a.innerText = tc[i];\n      x = 100 * sin(p / 9);\n      z = -100 * cos(p / 9);\n      t = new Tag(\n        this,\n        tc[i],\n        a,\n        [x, 0, z],\n        2,\n        18,\n        \"#000\",\n        \"#fff\",\n        0,\n        0,\n        0,\n        \"monospace\",\n        2,\n        tc[i]\n      );\n      t.Init();\n      tl.push(t);\n    }\n  }\n  return tl;\n};\nTCproto.CreateTag = function (e) {\n  var im,\n    i,\n    t,\n    txt,\n    ts,\n    font,\n    bc,\n    boc,\n    p = [0, 0, 0];\n  if (\"text\" != this.imageMode) {\n    im = e.getElementsByTagName(\"img\");\n    if (im.length) {\n      i = new Image();\n      i.src = im[0].src;\n\n      if (!this.imageMode) {\n        t = new Tag(this, \"\", e, p, 0, 0);\n        t.SetImage(i);\n        //t.Init();\n        AddImage(i, im[0], t, this);\n        return t;\n      }\n    }\n  }\n  if (\"image\" != this.imageMode) {\n    ts = new TextSplitter(e);\n    txt = ts.Lines();\n    if (!ts.Empty()) {\n      font = this.textFont || FixFont(GetProperty(e, \"font-family\"));\n      if (this.splitWidth)\n        txt = ts.SplitWidth(this.splitWidth, this.ctxt, font, this.textHeight);\n\n      bc =\n        this.bgColour == \"tag\"\n          ? GetProperty(e, \"background-color\")\n          : this.bgColour;\n      boc = this.bgOutline == \"tag\" ? GetProperty(e, \"color\") : this.bgOutline;\n    } else {\n      ts = null;\n    }\n  }\n  if (ts || i) {\n    t = new Tag(\n      this,\n      txt,\n      e,\n      p,\n      2,\n      this.textHeight + 2,\n      this.textColour || GetProperty(e, \"color\"),\n      bc,\n      this.bgRadius,\n      boc,\n      this.bgOutlineThickness,\n      font,\n      this.padding,\n      ts && ts.original\n    );\n    if (i) {\n      t.SetImage(i);\n      AddImage(i, im[0], t, this);\n    } else {\n      t.Init();\n    }\n    return t;\n  }\n};\nTCproto.UpdateTag = function (t, a) {\n  var colour = this.textColour || GetProperty(a, \"color\"),\n    font = this.textFont || FixFont(GetProperty(a, \"font-family\")),\n    bc =\n      this.bgColour == \"tag\"\n        ? GetProperty(a, \"background-color\")\n        : this.bgColour,\n    boc = this.bgOutline == \"tag\" ? GetProperty(a, \"color\") : this.bgOutline;\n  t.a = a;\n  t.title = a.title;\n  if (\n    t.colour != colour ||\n    t.textFont != font ||\n    t.bgColour != bc ||\n    t.bgOutline != boc\n  )\n    t.SetFont(font, colour, bc, boc);\n};\nTCproto.Weight = function (tl) {\n  var ll = tl.length,\n    w,\n    i,\n    s,\n    weights = [],\n    valid,\n    wfrom = this.weightFrom ? this.weightFrom.split(/[, ]/) : [null],\n    wl = wfrom.length;\n  for (i = 0; i < ll; ++i) {\n    weights[i] = [];\n    for (s = 0; s < wl; ++s) {\n      w = FindWeight(tl[i].a, wfrom[s], this.textHeight);\n      if (!this.max_weight[s] || w > this.max_weight[s]) this.max_weight[s] = w;\n      if (!this.min_weight[s] || w < this.min_weight[s]) this.min_weight[s] = w;\n      weights[i][s] = w;\n    }\n  }\n  for (s = 0; s < wl; ++s) {\n    if (this.max_weight[s] > this.min_weight[s]) valid = 1;\n  }\n  if (valid) {\n    for (i = 0; i < ll; ++i) {\n      tl[i].SetWeight(weights[i]);\n    }\n  }\n};\nTCproto.Load = function () {\n  var tl = this.GetTags(),\n    taglist = [],\n    shape,\n    t,\n    shapeArgs,\n    rx,\n    ry,\n    rz,\n    vl,\n    i,\n    tagmap = [],\n    pfuncs = {\n      sphere: PointsOnSphere,\n      vcylinder: PointsOnCylinderV,\n      hcylinder: PointsOnCylinderH,\n      vring: PointsOnRingV,\n      hring: PointsOnRingH,\n    };\n\n  if (tl.length) {\n    tagmap.length = tl.length;\n    for (i = 0; i < tl.length; ++i) tagmap[i] = i;\n    this.shuffleTags && Shuffle(tagmap);\n    rx = 100 * this.radiusX;\n    ry = 100 * this.radiusY;\n    rz = 100 * this.radiusZ;\n    this.max_radius = max(rx, max(ry, rz));\n\n    for (i = 0; i < tl.length; ++i) {\n      t = this.CreateTag(tl[tagmap[i]]);\n      if (t) taglist.push(t);\n    }\n    this.weight && this.Weight(taglist, true);\n\n    if (this.shapeArgs) {\n      this.shapeArgs[0] = taglist.length;\n    } else {\n      shapeArgs = this.shape.toString().split(/[(),]/);\n      shape = shapeArgs.shift();\n      if (typeof window[shape] === \"function\") this.shape = window[shape];\n      else this.shape = pfuncs[shape] || pfuncs.sphere;\n      this.shapeArgs = [taglist.length, rx, ry, rz].concat(shapeArgs);\n    }\n    vl = this.shape.apply(this, this.shapeArgs);\n    this.listLength = taglist.length;\n    for (i = 0; i < taglist.length; ++i)\n      taglist[i].position = new Vector(vl[i][0], vl[i][1], vl[i][2]);\n  }\n  if (this.noTagsMessage && !taglist.length) {\n    i = this.imageMode && this.imageMode != \"both\" ? this.imageMode + \" \" : \"\";\n    taglist = this.Message(\"No \" + i + \"tags\");\n  }\n  this.taglist = taglist;\n};\nTCproto.Update = function () {\n  var tl = this.GetTags(),\n    newlist = [],\n    taglist = this.taglist,\n    found,\n    added = [],\n    removed = [],\n    vl,\n    ol,\n    nl,\n    i,\n    j;\n\n  if (!this.shapeArgs) return this.Load();\n\n  if (tl.length) {\n    nl = this.listLength = tl.length;\n    ol = taglist.length;\n\n    // copy existing list, populate \"removed\"\n    for (i = 0; i < ol; ++i) {\n      newlist.push(taglist[i]);\n      removed.push(i);\n    }\n\n    // find added and removed tags\n    for (i = 0; i < nl; ++i) {\n      for (j = 0, found = 0; j < ol; ++j) {\n        if (taglist[j].EqualTo(tl[i])) {\n          this.UpdateTag(newlist[j], tl[i]);\n          found = removed[j] = -1;\n        }\n      }\n      if (!found) added.push(i);\n    }\n\n    // clean out found tags from removed list\n    for (i = 0, j = 0; i < ol; ++i) {\n      if (removed[j] == -1) removed.splice(j, 1);\n      else ++j;\n    }\n\n    // insert new tags in gaps where old tags removed\n    if (removed.length) {\n      Shuffle(removed);\n      while (removed.length && added.length) {\n        i = removed.shift();\n        j = added.shift();\n        newlist[i] = this.CreateTag(tl[j]);\n      }\n\n      // remove any more (in reverse order)\n      removed.sort(function (a, b) {\n        return a - b;\n      });\n      while (removed.length) {\n        newlist.splice(removed.pop(), 1);\n      }\n    }\n\n    // add any extra tags\n    j = newlist.length / (added.length + 1);\n    i = 0;\n    while (added.length) {\n      newlist.splice(ceil(++i * j), 0, this.CreateTag(tl[added.shift()]));\n    }\n\n    // assign correct positions to tags\n    this.shapeArgs[0] = nl = newlist.length;\n    vl = this.shape.apply(this, this.shapeArgs);\n    for (i = 0; i < nl; ++i)\n      newlist[i].position = new Vector(vl[i][0], vl[i][1], vl[i][2]);\n\n    // reweight tags\n    this.weight && this.Weight(newlist);\n  }\n  this.taglist = newlist;\n};\nTCproto.SetShadow = function (c) {\n  c.shadowBlur = this.shadowBlur;\n  c.shadowOffsetX = this.shadowOffset[0];\n  c.shadowOffsetY = this.shadowOffset[1];\n};\nTCproto.Draw = function (t) {\n  if (this.paused) return;\n  var cv = this.canvas,\n    cw = cv.width,\n    ch = cv.height,\n    max_sc = 0,\n    tdelta = ((t - this.time) * TagCanvas.interval) / 1000,\n    x = cw / 2 + this.offsetX,\n    y = ch / 2 + this.offsetY,\n    c = this.ctxt,\n    active,\n    a,\n    i,\n    aindex = -1,\n    tl = this.taglist,\n    l = tl.length,\n    frontsel = this.frontSelect,\n    centreDrawn = this.centreFunc == Nop,\n    fixed;\n  this.time = t;\n  if (this.frozen && this.drawn) return this.Animate(cw, ch, tdelta);\n  fixed = this.AnimateFixed();\n  c.setTransform(1, 0, 0, 1, 0, 0);\n  for (i = 0; i < l; ++i) tl[i].Calc(this.transform, this.fixedAlpha);\n  tl = SortList(tl, function (a, b) {\n    return b.z - a.z;\n  });\n\n  if (fixed && this.fixedAnim.active) {\n    active = this.fixedAnim.tag.UpdateActive(c, x, y);\n  } else {\n    this.active = null;\n    for (i = 0; i < l; ++i) {\n      a = this.mx >= 0 && this.my >= 0 && this.taglist[i].CheckActive(c, x, y);\n      if (a && a.sc > max_sc && (!frontsel || a.z <= 0)) {\n        active = a;\n        aindex = i;\n        active.tag = this.taglist[i];\n        max_sc = a.sc;\n      }\n    }\n    this.active = active;\n  }\n\n  this.txtOpt || (this.shadow && this.SetShadow(c));\n  c.clearRect(0, 0, cw, ch);\n  for (i = 0; i < l; ++i) {\n    if (!centreDrawn && tl[i].z <= 0) {\n      // run the centreFunc if the next tag is at the front\n      try {\n        this.centreFunc(c, cw, ch, x, y);\n      } catch (e) {\n        alert(e);\n        // don't run it again\n        this.centreFunc = Nop;\n      }\n      centreDrawn = true;\n    }\n\n    if (!(active && active.tag == tl[i] && active.PreDraw(c, tl[i], x, y)))\n      tl[i].Draw(c, x, y);\n    active && active.tag == tl[i] && active.PostDraw(c);\n  }\n  if (this.freezeActive && active) {\n    this.Freeze();\n  } else {\n    this.UnFreeze();\n    this.drawn = l == this.listLength;\n  }\n  if (this.fixedCallback) {\n    this.fixedCallback(this, this.fixedCallbackTag);\n    this.fixedCallback = null;\n  }\n  fixed || this.Animate(cw, ch, tdelta);\n  active && active.LastDraw(c);\n  cv.style.cursor = active ? this.activeCursor : \"\";\n  this.Tooltip(active, this.taglist[aindex]);\n};\nTCproto.TooltipNone = function () {};\nTCproto.TooltipNative = function (active, tag) {\n  if (active) this.canvas.title = tag && tag.title ? tag.title : \"\";\n  else this.canvas.title = this.ctitle;\n};\nTCproto.SetTTDiv = function (title, tag) {\n  var tc = this,\n    s = tc.ttdiv.style;\n  if (title != tc.ttdiv.innerHTML) s.display = \"none\";\n  tc.ttdiv.innerHTML = title;\n  tag && (tag.title = tc.ttdiv.innerHTML);\n  if (s.display == \"none\" && !tc.tttimer) {\n    tc.tttimer = setTimeout(function () {\n      var p = AbsPos(tc.canvas.id);\n      s.display = \"block\";\n      s.left = p.x + tc.mx + \"px\";\n      s.top = p.y + tc.my + 24 + \"px\";\n      tc.tttimer = null;\n    }, tc.tooltipDelay);\n  }\n};\nTCproto.TooltipDiv = function (active, tag) {\n  if (active && tag && tag.title) {\n    this.SetTTDiv(tag.title, tag);\n  } else if (!active && this.mx != -1 && this.my != -1 && this.ctitle.length) {\n    this.SetTTDiv(this.ctitle);\n  } else {\n    this.ttdiv.style.display = \"none\";\n  }\n};\nTCproto.Transform = function (tc, p, y) {\n  if (p || y) {\n    var sp = sin(p),\n      cp = cos(p),\n      sy = sin(y),\n      cy = cos(y),\n      ym = new Matrix([cy, 0, sy, 0, 1, 0, -sy, 0, cy]),\n      pm = new Matrix([1, 0, 0, 0, cp, -sp, 0, sp, cp]);\n    tc.transform = tc.transform.mul(ym.mul(pm));\n  }\n};\nTCproto.AnimateFixed = function () {\n  var fa, t1, angle, m, d;\n  if (this.fadeIn) {\n    t1 = TimeNow() - this.startTime;\n    if (t1 >= this.fadeIn) {\n      this.fadeIn = 0;\n      this.fixedAlpha = 1;\n    } else {\n      this.fixedAlpha = t1 / this.fadeIn;\n    }\n  }\n  if (this.fixedAnim) {\n    if (!this.fixedAnim.transform) this.fixedAnim.transform = this.transform;\n    fa = this.fixedAnim;\n    t1 = TimeNow() - fa.t0;\n    angle = fa.angle;\n\n    d = this.animTiming(fa.t, t1);\n    this.transform = fa.transform;\n    if (t1 >= fa.t) {\n      this.fixedCallbackTag = fa.tag;\n      this.fixedCallback = fa.cb;\n      this.fixedAnim = this.yaw = this.pitch = 0;\n    } else {\n      angle *= d;\n    }\n    m = Matrix.Rotation(angle, fa.axis);\n    this.transform = this.transform.mul(m);\n    return this.fixedAnim != 0;\n  }\n  return false;\n};\nTCproto.AnimatePosition = function (w, h, t) {\n  var tc = this,\n    x = tc.mx,\n    y = tc.my,\n    s,\n    r;\n  if (!tc.frozen && x >= 0 && y >= 0 && x < w && y < h) {\n    s = tc.maxSpeed;\n    r = tc.reverse ? -1 : 1;\n    tc.lx || (tc.yaw = ((x * 2 * s) / w - s) * r * t);\n    tc.ly || (tc.pitch = ((y * 2 * s) / h - s) * -r * t);\n    tc.initial = null;\n  } else if (!tc.initial) {\n    if (tc.frozen && !tc.freezeDecel) tc.yaw = tc.pitch = 0;\n    else tc.Decel(tc);\n  }\n  this.Transform(tc, tc.pitch, tc.yaw);\n};\nTCproto.AnimateDrag = function (w, h, t) {\n  var tc = this,\n    rs = (100 * t * tc.maxSpeed) / tc.max_radius / tc.zoom;\n  if (tc.dx || tc.dy) {\n    tc.lx || (tc.yaw = (tc.dx * rs) / tc.stretchX);\n    tc.ly || (tc.pitch = (tc.dy * -rs) / tc.stretchY);\n    tc.dx = tc.dy = 0;\n    tc.initial = null;\n  } else if (!tc.initial) {\n    tc.Decel(tc);\n  }\n  this.Transform(tc, tc.pitch, tc.yaw);\n};\nTCproto.Freeze = function () {\n  if (!this.frozen) {\n    this.preFreeze = [this.yaw, this.pitch];\n    this.frozen = 1;\n    this.drawn = 0;\n  }\n};\nTCproto.UnFreeze = function () {\n  if (this.frozen) {\n    this.yaw = this.preFreeze[0];\n    this.pitch = this.preFreeze[1];\n    this.frozen = 0;\n  }\n};\nTCproto.Decel = function (tc) {\n  var s = tc.minSpeed,\n    ay = abs(tc.yaw),\n    ap = abs(tc.pitch);\n  if (!tc.lx && ay > s) tc.yaw = ay > tc.z0 ? tc.yaw * tc.decel : 0;\n  if (!tc.ly && ap > s) tc.pitch = ap > tc.z0 ? tc.pitch * tc.decel : 0;\n};\nTCproto.Zoom = function (r) {\n  this.z2 = this.z1 * (1 / r);\n  this.drawn = 0;\n};\nTCproto.Clicked = function (e) {\n  var a = this.active;\n  try {\n    if (a && a.tag)\n      if (this.clickToFront === false || this.clickToFront === null)\n        a.tag.Clicked(e);\n      else\n        this.TagToFront(\n          a.tag,\n          this.clickToFront,\n          function () {\n            a.tag.Clicked(e);\n          },\n          true\n        );\n  } catch (ex) {}\n};\nTCproto.Wheel = function (i) {\n  var z = this.zoom + this.zoomStep * (i ? 1 : -1);\n  this.zoom = min(this.zoomMax, max(this.zoomMin, z));\n  this.Zoom(this.zoom);\n};\nTCproto.BeginDrag = function (e) {\n  this.down = EventXY(e, this.canvas);\n  e.cancelBubble = true;\n  e.returnValue = false;\n  e.preventDefault && e.preventDefault();\n};\nTCproto.Drag = function (e, p) {\n  if (this.dragControl && this.down) {\n    var t2 = this.dragThreshold * this.dragThreshold,\n      dx = p.x - this.down.x,\n      dy = p.y - this.down.y;\n    if (this.dragging || dx * dx + dy * dy > t2) {\n      this.dx = dx;\n      this.dy = dy;\n      this.dragging = 1;\n      this.down = p;\n    }\n  }\n  return this.dragging;\n};\nTCproto.EndDrag = function () {\n  var res = this.dragging;\n  this.dragging = this.down = null;\n  return res;\n};\nfunction PinchDistance(e) {\n  var t1 = e.targetTouches[0],\n    t2 = e.targetTouches[1];\n  return sqrt(pow(t2.pageX - t1.pageX, 2) + pow(t2.pageY - t1.pageY, 2));\n}\nTCproto.BeginPinch = function (e) {\n  this.pinched = [PinchDistance(e), this.zoom];\n  e.preventDefault && e.preventDefault();\n};\nTCproto.Pinch = function (e) {\n  var z,\n    d,\n    p = this.pinched;\n  if (!p) return;\n  d = PinchDistance(e);\n  z = (p[1] * d) / p[0];\n  this.zoom = min(this.zoomMax, max(this.zoomMin, z));\n  this.Zoom(this.zoom);\n};\nTCproto.EndPinch = function (e) {\n  this.pinched = null;\n};\nTCproto.Pause = function () {\n  this.paused = true;\n};\nTCproto.Resume = function () {\n  this.paused = false;\n};\nTCproto.SetSpeed = function (i) {\n  this.initial = i;\n  this.yaw = i[0] * this.maxSpeed;\n  this.pitch = i[1] * this.maxSpeed;\n};\nTCproto.FindTag = function (t) {\n  if (!Defined(t)) return null;\n  Defined(t.index) && (t = t.index);\n  if (!IsObject(t)) return this.taglist[t];\n  var srch, tgt, i;\n  if (Defined(t.id)) {\n    srch = \"id\";\n    tgt = t.id;\n  } else if (Defined(t.text)) {\n    srch = \"innerText\";\n    tgt = t.text;\n  }\n\n  for (i = 0; i < this.taglist.length; ++i)\n    if (this.taglist[i].a[srch] == tgt) return this.taglist[i];\n};\nTCproto.RotateTag = function (tag, lt, lg, time, callback, active) {\n  var t = tag.Calc(this.transform, 1),\n    v1 = new Vector(t.x, t.y, t.z),\n    v2 = MakeVector(lg, lt),\n    angle = v1.angle(v2),\n    u = v1.cross(v2).unit();\n  if (angle == 0) {\n    this.fixedCallbackTag = tag;\n    this.fixedCallback = callback;\n  } else {\n    this.fixedAnim = {\n      angle: -angle,\n      axis: u,\n      t: time,\n      t0: TimeNow(),\n      cb: callback,\n      tag: tag,\n      active: active,\n    };\n  }\n};\nTCproto.TagToFront = function (tag, time, callback, active) {\n  this.RotateTag(tag, 0, 0, time, callback, active);\n};\nTagCanvas.Start = function (id, l, o) {\n  TagCanvas.Delete(id);\n  TagCanvas.tc[id] = new TagCanvas(id, l, o);\n};\nfunction tccall(f, id) {\n  TagCanvas.tc[id] && TagCanvas.tc[id][f]();\n}\nTagCanvas.Linear = function (t, t0) {\n  return t0 / t;\n};\nTagCanvas.Smooth = function (t, t0) {\n  return 0.5 - cos((t0 * Math.PI) / t) / 2;\n};\nTagCanvas.Pause = function (id) {\n  tccall(\"Pause\", id);\n};\nTagCanvas.Resume = function (id) {\n  tccall(\"Resume\", id);\n};\nTagCanvas.Reload = function (id) {\n  tccall(\"Load\", id);\n};\nTagCanvas.Update = function (id) {\n  tccall(\"Update\", id);\n};\nTagCanvas.SetSpeed = function (id, speed) {\n  if (\n    IsObject(speed) &&\n    TagCanvas.tc[id] &&\n    !isNaN(speed[0]) &&\n    !isNaN(speed[1])\n  ) {\n    TagCanvas.tc[id].SetSpeed(speed);\n    return true;\n  }\n  return false;\n};\nTagCanvas.TagToFront = function (id, options) {\n  if (!IsObject(options)) return false;\n  options.lat = options.lng = 0;\n  return TagCanvas.RotateTag(id, options);\n};\nTagCanvas.RotateTag = function (id, options) {\n  if (IsObject(options) && TagCanvas.tc[id]) {\n    if (isNaN(options.time)) options.time = 500;\n    var tt = TagCanvas.tc[id].FindTag(options);\n    if (tt) {\n      TagCanvas.tc[id].RotateTag(\n        tt,\n        options.lat,\n        options.lng,\n        options.time,\n        options.callback,\n        options.active\n      );\n      return true;\n    }\n  }\n  return false;\n};\nTagCanvas.Delete = function (id) {\n  var i, c;\n  if (handlers[id]) {\n    c = doc.getElementById(id);\n    if (c) {\n      for (i = 0; i < handlers[id].length; ++i)\n        RemoveHandler(handlers[id][i][0], handlers[id][i][1], c);\n    }\n  }\n  delete handlers[id];\n  delete TagCanvas.tc[id];\n};\nTagCanvas.NextFrameRAF = function () {\n  requestAnimationFrame(DrawCanvasRAF);\n};\nTagCanvas.NextFrameTimeout = function (iv) {\n  setTimeout(DrawCanvas, iv);\n};\nTagCanvas.tc = {};\nTagCanvas.options = {\n  z1: 20000,\n  z2: 20000,\n  z0: 0.0002,\n  freezeActive: false,\n  freezeDecel: false,\n  activeCursor: \"pointer\",\n  pulsateTo: 1,\n  pulsateTime: 3,\n  reverse: false,\n  depth: 0.5,\n  maxSpeed: 0.05,\n  minSpeed: 0,\n  decel: 0.95,\n  interval: 20,\n  minBrightness: 0.1,\n  maxBrightness: 1,\n  outlineColour: \"#ffff99\",\n  outlineThickness: 2,\n  outlineOffset: 5,\n  outlineMethod: \"outline\",\n  outlineRadius: 0,\n  textColour: \"#ff99ff\",\n  textHeight: 15,\n  textFont: \"Helvetica, Arial, sans-serif\",\n  shadow: \"#000\",\n  shadowBlur: 0,\n  shadowOffset: [0, 0],\n  initial: null,\n  hideTags: true,\n  zoom: 1,\n  weight: false,\n  weightMode: \"size\",\n  weightFrom: null,\n  weightSize: 1,\n  weightSizeMin: null,\n  weightSizeMax: null,\n  weightGradient: { 0: \"#f00\", 0.33: \"#ff0\", 0.66: \"#0f0\", 1: \"#00f\" },\n  txtOpt: true,\n  txtScale: 2,\n  frontSelect: false,\n  wheelZoom: true,\n  zoomMin: 0.3,\n  zoomMax: 3,\n  zoomStep: 0.05,\n  shape: \"sphere\",\n  lock: null,\n  tooltip: null,\n  tooltipDelay: 300,\n  tooltipClass: \"tctooltip\",\n  radiusX: 1,\n  radiusY: 1,\n  radiusZ: 1,\n  stretchX: 1,\n  stretchY: 1,\n  offsetX: 0,\n  offsetY: 0,\n  shuffleTags: false,\n  noSelect: false,\n  noMouse: false,\n  imageScale: 1,\n  paused: false,\n  dragControl: false,\n  dragThreshold: 4,\n  centreFunc: Nop,\n  splitWidth: 0,\n  animTiming: \"Smooth\",\n  clickToFront: false,\n  fadeIn: 0,\n  padding: 0,\n  bgColour: null,\n  bgRadius: 0,\n  bgOutline: null,\n  bgOutlineThickness: 0,\n  outlineIncrease: 4,\n  textAlign: \"centre\",\n  textVAlign: \"middle\",\n  imageMode: null,\n  imagePosition: null,\n  imagePadding: 2,\n  imageAlign: \"centre\",\n  imageVAlign: \"middle\",\n  noTagsMessage: true,\n  centreImage: null,\n  pinchZoom: false,\n  repeatTags: 0,\n  minTags: 0,\n  imageRadius: 0,\n  scrollPause: false,\n  outlineDash: 0,\n  outlineDashSpace: 0,\n  outlineDashSpeed: 1,\n};\nfor (i in TagCanvas.options) TagCanvas[i] = TagCanvas.options[i];\n\n// set a flag for when the window has loaded\nAddHandler(\n  \"load\",\n  function () {\n    TagCanvas.loaded = 1;\n  },\n  window\n);\nexport default TagCanvas;\n","import React from 'react'\nimport TagCanvas from './tagcanvas'\n\n// Used from https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport const uuidv4 = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0\n    const v = c === 'x' ? r : (r & 0x3) | 0x8\n    return v.toString(16)\n  })\n}\n\nconst TagsCanvas = ({\n  width,\n  height,\n  tags,\n  weight = true,\n  weightFrom = 'data-weight',\n  className,\n  ...options\n}) => {\n  const [id] = React.useState('a' + uuidv4())\n  React.useEffect(() => {\n    TagCanvas.Start(id, `${id}-tags`, { weight, weightFrom, ...options })\n  }, [options])\n  return (\n    <canvas className={className} width={width} height={height} id={id}>\n      <div id={`${id}-tags`} className='tag-cloud-tags'>\n        <ul>\n          {tags.map((tag) => {\n            if (tag.value) {\n              return (\n                <li key={tag.value}>\n                  <a data-weight={tag.weight}>{tag.value}</a>\n                </li>\n              )\n            }\n            return (\n              <li key={tag}>\n                <a>{tag}</a>\n              </li>\n            )\n          })}\n        </ul>\n      </div>\n    </canvas>\n  )\n}\nexport default TagsCanvas\n"],"names":["i","j","abs","Math","sin","cos","max","min","ceil","sqrt","pow","hexlookup3","hexlookup2","hexlookup1","a","A","b","B","c","C","d","D","e","E","f","F","Oproto","Tproto","TCproto","Mproto","Vproto","TSproto","TCVproto","doc","document","ocanvas","handlers","toString","toUpperCase","Defined","IsObject","o","Clamp","v","mn","mx","isNaN","Nop","TimeNow","Date","valueOf","SortList","l","nl","tl","length","push","sort","Shuffle","t","p","random","Vector","x","y","z","prototype","dot","cross","angle","ac","PI","acos","unit","MakeVector","lg","lt","Matrix","Identity","Rotation","u","sina","cosa","mcos","mul","m","mmatrix","xform","PointsOnSphere","n","xr","yr","zr","magic","r","phi","pts","off","inc","parseFloat","Cylinder","k","Ring","PointsOnCylinderV","PointsOnCylinderH","PointsOnRingV","offset","PointsOnRingH","CentreImage","Image","onload","dx","width","dy","height","centreFunc","w","h","cx","cy","setTransform","globalAlpha","drawImage","src","centreImage","SetAlpha","p1","p2","ae","toPrecision","substr","replace","lastIndexOf","indexOf","substring","NewCanvas","window","G_vmlCanvasManager","createElement","ShadowAlphaBroken","cv","getContext","strokeStyle","shadowColor","shadowBlur","strokeRect","getImageData","data","SetGradient","g","gd","createLinearGradient","addColorStop","fillStyle","fillRect","FindGradientColour","tc","gl","weightGradient","gCanvas","TextSet","ctxt","font","colour","strings","padx","pady","shadowColour","shadowOffsets","maxWidth","widths","align","xo","yo","xc","textBaseline","shadowOffsetX","shadowOffsetY","fillText","parseInt","RRect","s","beginPath","moveTo","arcTo","closePath","TextCanvas","stringWidths","valign","scale","SetImage","image","position","padding","iwidth","iheight","ipos","ipad","iscale","ialign","ivalign","Align","size","space","pos","Create","bgColour","bgOutline","bgOutlineThickness","radius","cw","ch","x1","x2","y1","y2","offx","offy","ix","iy","iw","ih","rr","sox","soy","shadowcv","shadowc","lineWidth","ExpandImage","ScaleImage","AddBackgroundToImage","othickness","ocolour","ofill","cc","globalCompositeOperation","RoundImage","r1","arc","fill","AddShadowToImage","sc","sb","so","sw","sh","FindTextBoundingBox","ht","idata","w1","h1","ex","FixFont","AddHandler","addEventListener","attachEvent","RemoveHandler","removeEventListener","detachEvent","AddImage","imageScale","mscale","ic","bc","oc","complete","txtOpt","zoomMax","txtScale","naturalWidth","naturalHeight","fimage","imageRadius","HasText","shadow","shadowOffset","GetProperty","textColour","outlineMethod","outline","bgRadius","oimage","outlineIncrease","Init","dv","defaultView","pc","charAt","getComputedStyle","getPropertyValue","currentStyle","FindWeight","wFrom","tHeight","getAttribute","EventToCanvasId","target","id","srcElement","parentNode","EventXY","xy","xmul","ymul","offsetX","offsetY","AbsPos","changedTouches","pageX","pageY","MouseOut","fromElement","TagCanvas","my","UnFreeze","EndDrag","MouseMove","tg","tttimer","clearTimeout","canvas","Drag","drawn","MouseDown","cb","button","BeginDrag","MouseUp","touchState","Clicked","TouchDown","touches","targetTouches","pinchZoom","BeginPinch","EndPinch","TouchUp","Draw","TouchMove","Pinch","MouseWheel","cancelBubble","returnValue","preventDefault","Wheel","wheelDelta","detail","Scroll","scrollTimer","Pause","setTimeout","Resume","scrollPause","DrawCanvas","DrawCanvasRAF","NextFrame","interval","getElementById","getBoundingClientRect","dd","documentElement","body","xs","pageXOffset","scrollLeft","ys","pageYOffset","scrollTop","clientLeft","clientTop","left","top","Project","sx","sy","z1","z2","TextSplitter","br","line","text","original","innerText","textContent","Empty","Lines","cn","cl","childNodes","nodeName","join","nodeType","nodeValue","SplitWidth","words","split","measureText","Outline","ts","tag","pulse","pulsate","pulsateTo","outlineColour","adash","outlineDash","agap","outlineDashSpace","aspeed","outlineDashSpeed","DrawPulsate","DrawSimple","outlineRadius","SetMethod","om","methods","block","classic","none","funcs","drawFunc","Update","outlineOffset","o2","Ants","l1","l2","g1","g2","seq","ants","setLineDash","DrawOutline","DrawSize","tw","th","oscale","alpha","DrawColour","DrawColourText","normal","DrawColourImage","ccanvas","fx","fy","fw","fh","clearRect","save","rect","clip","restore","DrawBlock","ga","useGa","outlineThickness","diff","pulsateTime","Smooth","Active","PreDraw","PostDraw","LastDraw","Tag","col","bcol","bradius","boutline","bothickness","text_original","line_widths","title","textFont","weighted","weight","textHeight","Measure","SetShadowColour","shadowAlpha","SetShadowColourAlpha","SetShadowColourFixed","SetDraw","EqualTo","getElementsByTagName","href","ie","DrawImageIE","DrawImage","DrawText","noSelect","CheckActive","MeasureText","wl","extents","soff","twidth","theight","img","tcv","textAlign","textVAlign","imagePosition","imagePadding","imageAlign","imageVAlign","SetFont","boc","SetWeight","modes","weightMode","Weight","min_weight","max_weight","wmin","wmax","wnum","nweight","weightSizeMin","weightSizeMax","weightSize","xoff","yoff","xl","im","Calc","pp","mnb","minBrightness","mxb","maxBrightness","max_radius","xformed","stretchX","stretchY","UpdateActive","evt","open","createEvent","initMouseEvent","dispatchEvent","fireEvent","location","cid","lctr","opt","cp","raf","initElement","navigator","appVersion","insertBefore","removeChild","options","depth","zoom","lx","lock","ly","frozen","fixedAnim","fixedAlpha","source","repeatTags","minTags","GetTags","transform","startTime","time","Animate","dragControl","AnimateDrag","AnimatePosition","animTiming","Load","hideTags","loaded","HideTags","yaw","initial","maxSpeed","pitch","tooltip","ctitle","Tooltip","TooltipNative","TooltipDiv","ttdiv","className","tooltipClass","style","zIndex","display","appendChild","TooltipNone","noMouse","wheelZoom","started","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","NextFrameRAF","NextFrameTimeout","SourceElements","querySelectorAll","el","etl","Message","CreateTag","txt","imageMode","splitWidth","UpdateTag","ll","weights","valid","wfrom","weightFrom","taglist","shape","shapeArgs","rx","ry","rz","vl","tagmap","pfuncs","sphere","vcylinder","hcylinder","vring","hring","shuffleTags","radiusX","radiusY","radiusZ","shift","concat","apply","listLength","noTagsMessage","newlist","found","added","removed","ol","splice","pop","SetShadow","paused","max_sc","tdelta","active","aindex","frontsel","frontSelect","centreDrawn","fixed","AnimateFixed","alert","freezeActive","Freeze","fixedCallback","fixedCallbackTag","cursor","activeCursor","SetTTDiv","innerHTML","tooltipDelay","Transform","sp","ym","pm","fa","t1","fadeIn","t0","axis","reverse","freezeDecel","Decel","rs","preFreeze","minSpeed","ay","ap","z0","decel","Zoom","clickToFront","TagToFront","zoomStep","zoomMin","down","t2","dragThreshold","dragging","res","PinchDistance","pinched","SetSpeed","FindTag","index","srch","tgt","RotateTag","callback","v1","v2","Start","Delete","tccall","Linear","Reload","speed","lat","lng","tt","iv","uuidv4","TagsCanvas","tags","React","useState","useEffect","map","value"],"mappings":"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"}